
func malloc(s: u64) -> u8*;

struct str {
    c_str: i8*,
    size: u32
}

impl str {
    func new() -> str* {
        var res: str* = malloc(sizeof(str));
        res->c_str = malloc(128);
        res->size = 0;
        res->c_str[0] = 0;
        return res;
    }

    func empty(self: str*) -> u8 {
        if (self->size == 0) {
            return 1;
        }
        return 0;
    }

    func copy(self: str*) -> str* {
        var new_str: str* = str.new();
        new_str->size = self->size;
        new_str->c_str = malloc(self->size);
        var i: u32 = 0;
        while (i<self->size) {
            new_str->c_str[i] = self->c_str[i];
        }
        return new_str;
    }
}

struct span {
    begin_line: u32,
    begin_column: u32,
    end_line: u32,
    end_column: u32
}

impl span {
    func dump(self: span*) {
        self->dump();
        return;
    }
}

struct ast {
    location: span*,
    type: u32,
    size: u32,
    child: ast*
}

impl ast {
    func new() -> ast* {
        return malloc(sizeof(ast));
    }
    func get_type(self: ast*) -> u32 {
        return self->type;
    }
}

func test_and() {
    if (1 == 1 and 2 == 2 and 3 == 3) {
        return;
    }
}

func test_or() {
    if (1 == 1 or 2 == 2 or 3 == 3) {
        return;
    }
}

func main(argc: i32, argv: i8**) -> i32 {
    var a: i32 = 1;
    var str: i32 = 1;
    var b: str* = str::new();
    var c: bool = true;
    print("hello world!\n");
    println("hello world!");
    return 0;
}